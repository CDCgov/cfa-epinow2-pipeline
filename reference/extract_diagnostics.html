<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract diagnostic metrics from model fit and data — extract_diagnostics • CFAEpiNow2Pipeline</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract diagnostic metrics from model fit and data — extract_diagnostics"><meta name="description" content="This function extracts various diagnostic metrics from a fitted EpiNow2
model and provided data. It checks for low case counts and computes
diagnostics from the fitted model, including the mean acceptance
statistic, divergent transitions, maximum tree depth, and Rhat values.
Additionally, a combined flag is computed indicating if any diagnostics
are outside an acceptable range. The results are returned as a data frame."><meta property="og:description" content="This function extracts various diagnostic metrics from a fitted EpiNow2
model and provided data. It checks for low case counts and computes
diagnostics from the fitted model, including the mean acceptance
statistic, divergent transitions, maximum tree depth, and Rhat values.
Additionally, a combined flag is computed indicating if any diagnostics
are outside an acceptable range. The results are returned as a data frame."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CFAEpiNow2Pipeline</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract diagnostic metrics from model fit and data</h1>

      <div class="d-none name"><code>extract_diagnostics.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function extracts various diagnostic metrics from a fitted <code>EpiNow2</code>
model and provided data. It checks for low case counts and computes
diagnostics from the fitted model, including the mean acceptance
statistic, divergent transitions, maximum tree depth, and Rhat values.
Additionally, a combined flag is computed indicating if any diagnostics
are outside an acceptable range. The results are returned as a data frame.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_diagnostics</span><span class="op">(</span><span class="va">fit</span>, <span class="va">data</span>, <span class="va">job_id</span>, <span class="va">task_id</span>, <span class="va">disease</span>, <span class="va">geo_value</span>, <span class="va">model</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>The model fit object from <code>EpiNow2</code></p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing the input data used in the model fit.</p></dd>


<dt id="arg-job-id">job_id<a class="anchor" aria-label="anchor" href="#arg-job-id"></a></dt>
<dd><p>A string specifying the job.</p></dd>


<dt id="arg-task-id">task_id<a class="anchor" aria-label="anchor" href="#arg-task-id"></a></dt>
<dd><p>A string specifying the task.</p></dd>


<dt id="arg-disease">disease<a class="anchor" aria-label="anchor" href="#arg-disease"></a></dt>
<dd><p>A string specifying the disease being modeled. One of
<code>"COVID-19"</code> or <code>"Influenza"</code>.</p></dd>


<dt id="arg-geo-value">geo_value<a class="anchor" aria-label="anchor" href="#arg-geo-value"></a></dt>
<dd><p>An uppercase, two-character string specifying the geographic
value, usually a state or <code>"US"</code> for national data.</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>A string specifying the model to be used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> containing the extracted diagnostic metrics. The
data frame includes the following columns:</p><ul><li><p><code>diagnostic</code>: The name of the diagnostic metric.</p></li>
<li><p><code>value</code>: The value of the diagnostic metric.</p></li>
<li><p><code>job_id</code>: The unique identifier for the job.</p></li>
<li><p><code>task_id</code>: The unique identifier for the task.</p></li>
<li><p><code>disease,geo_value,model</code>: Metadata for downstream processing.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following diagnostics are calculated:</p><ul><li><p><code>mean_accept_stat</code>: The average acceptance statistic across
all chains.</p></li>
<li><p><code>p_divergent</code>: The <em>proportion</em> of divergent transitions across
all samples.</p></li>
<li><p><code>n_divergent</code>: The <em>number</em> of divergent transitions across
all samples.</p></li>
<li><p><code>p_max_treedepth</code>: The proportion of samples that hit the
maximum tree depth.</p></li>
<li><p><code>p_high_rhat</code>: The <em>proportion</em> of parameters with Rhat values
greater than 1.05, indicating potential convergence issues.</p></li>
<li><p><code>n_high_rhat</code>: The <em>number</em> of parameters with Rhat values
greater than 1.05, indicating potential convergence issues.</p></li>
<li><p><code>low_case_count_flag</code>: A flag indicating if there are low case
counts in the data. See <code><a href="low_case_count_diagnostic.html">low_case_count_diagnostic()</a></code> for more
information on this diagnostic.</p></li>
<li><p><code>epinow2_diagnostic_flag</code>: A combined flag that indicates if
any diagnostic metrics are outside an accepted range, as determined
by the thresholds: (1) mean_accept_stat &lt; 0.1, (2) p_divergent &gt;
0.0075, (3) p_max_treedepth &gt; 0.05, and (4) p_high_rhat &gt; 0.0075.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other diagnostics:
<code><a href="low_case_count_diagnostic.html">low_case_count_diagnostic</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zachary Susswein.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

